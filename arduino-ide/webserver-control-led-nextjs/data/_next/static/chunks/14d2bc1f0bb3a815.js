(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,52683,e=>{"use strict";var t=e.i(43476),r=e.i(71645);e.s(["default",0,()=>{let[e,l]=(0,r.useState)("OFF"),[a,n]=(0,r.useState)(!1),[s,o]=(0,r.useState)(null),[i,c]=(0,r.useState)(null),d=(0,r.useCallback)(async t=>{"UNKNOWN"===e&&n(!0),o(null);try{let e=await fetch(`${t}/STATUS`);if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);let r=await e.text();l((e=>{switch(e.trim()){case"0":return"OFF";case"1":return"ON";case"2":return"BLINKING";default:return"UNKNOWN"}})(r))}catch(t){console.error("Failed to fetch LED status:",t),"UNKNOWN"!==e&&o("Connection error: Could not connect to ESP32 server."),l("UNKNOWN")}finally{n(!1)}},[e]),u=async e=>{if(!i)return void o("App not initialized. Base URL missing.");n(!0),o(null);try{if(!(await fetch(`${i}/${e}`,{method:"POST"})).ok)throw Error(`Failed to send command to ${e}`);await d(i)}catch(t){console.error("Failed to execute command:",t);let e=t instanceof Error?t.message:"Unknown error";o(`Failed to set LED state: ${e}`)}finally{n(!1)}};(0,r.useEffect)(()=>{c(window.location.origin)},[]),(0,r.useEffect)(()=>{if(!i)return;d(i);let e=setInterval(()=>d(i),2e3);return()=>clearInterval(e)},[i,d]);let b=(()=>{switch(e){case"ON":return{text:"Status: ON (Steady)",className:"bg-green-100 text-green-800 border-green-400"};case"OFF":return{text:"Status: OFF",className:"bg-gray-100 text-gray-600 border-gray-300"};case"BLINKING":return{text:"Status: BLINKING",className:"bg-blue-100 text-blue-800 border-blue-400 animate-pulse"};default:return{text:null===i?"Initializing...":"Connecting...",className:"bg-yellow-100 text-yellow-800 border-yellow-300 animate-pulse"}}})(),x=(e,t,r,l)=>a||e===t||null===i?"bg-gray-300 text-gray-500 cursor-not-allowed shadow-inner":`${r} hover:${l} text-white shadow-lg shadow-opacity-40 transition-all duration-300 ease-in-out transform hover:scale-[1.01]`;return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"max-w-lg w-full bg-white p-8 rounded-2xl shadow-2xl space-y-8 border border-gray-100",children:[(0,t.jsx)("h1",{className:"text-3xl font-extrabold text-teal-700 border-b-4 border-teal-200 pb-3 mb-4",children:"IoT LED State Controller"}),s&&(0,t.jsxs)("div",{className:"p-3 bg-red-500 text-white rounded-lg shadow-md font-medium",children:["Error: ",s]}),(0,t.jsx)("div",{className:`status ${b.className} p-5 rounded-xl font-extrabold text-xl border-2 transition duration-300 ease-in-out text-center`,children:b.text}),(0,t.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,t.jsx)("button",{onClick:()=>u("LED_ON"),disabled:a||"ON"===e||null===i,className:`
              btn w-full py-4 rounded-xl text-lg font-bold ${x("ON",e,"bg-green-600","bg-green-700")}
            `,children:"Turn ON"}),(0,t.jsx)("button",{onClick:()=>u("LED_BLINK"),disabled:a||"BLINKING"===e||null===i,className:`
              btn w-full py-4 rounded-xl text-lg font-bold ${x("BLINKING",e,"bg-blue-600","bg-blue-700")}
            `,children:"Start BLINKING"}),(0,t.jsx)("button",{onClick:()=>u("LED_OFF"),disabled:a||"OFF"===e||null===i,className:`
              btn w-full py-4 rounded-xl text-lg font-bold ${x("OFF",e,"bg-teal-600","bg-teal-700")}
            `,children:"Turn OFF"})]}),(0,t.jsxs)("p",{className:"text-xs text-center text-gray-400 pt-2",children:["Base URL: ",i||"Awaiting initialization..."," | Last Poll:"," ",new Date().toLocaleTimeString()]})]})})}])}]);